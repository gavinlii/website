<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>gavin lii griffin</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preload" as="image" href="bg1.png">
    <link rel="preload" as="image" href="bg2.png">
    <link rel="preload" as="image" href="bg3.png">
    <link rel="preload" as="image" href="bg4.png">
    <link rel="preload" as="image" href="bg6.png">
  </head>

   <body>
    <main class="desk-center">
      <!-- Main dialog window -->
      <section
        class="desk-panel"
        style="position: relative; width: 360px; max-width: 92vw;"
      >
        <div class="titlebar">
          <span class="title" id="window-title"></span>
          <button class="titlebtn" aria-label="Close" type="button">Êùé</button>
        </div>

        <div style="padding: 12px 16px 16px;">
          <a class="titlebtn enter-btn" href="home.html">see more</a>
        </div>
      </section>
    </main>

    <script>
      function pickNonRepeating(key, options) {
        if (!Array.isArray(options) || options.length === 0) return null;
        if (options.length === 1) return options[0];

        const last = localStorage.getItem(key);
        let chosen = options[Math.floor(Math.random() * options.length)];

        for (let i = 0; i < 10 && chosen === last; i++) {
          chosen = options[Math.floor(Math.random() * options.length)];
        }

        if (chosen === last) {
          const idx = options.indexOf(last);
          chosen = options[(idx + 1) % options.length];
        }

        localStorage.setItem(key, chosen);
        return chosen;
      }

      // background (no consecutive repeats) + persist for home.html
      const backgrounds = ["bg1.png", "bg2.png", "bg3.png", "bg4.png", "bg6.png"];
      const bg = pickNonRepeating("last_bg", backgrounds);
      if (bg) {
        document.body.style.backgroundImage = `url('${bg}')`;
        localStorage.setItem("current_bg", bg);
      }

      const titles = [
    "a fleeting greeting",                 
    "hello, screen!",              
    "enquire further?",
    "enquire further?",
    "still here?",
    "still here?",
    "note: content best viewed on a CRT",           
    "nothing to see here",
    "quixotic sanguine", 
    "you there?",      
    "you there?", 
    "agentic since 2006",         
  ];

  const titleEl = document.getElementById("window-title");
  const title = pickNonRepeating("last_title", titles);
  if (titleEl && title) titleEl.textContent = title;
    </script>
  </body>
</html>

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>gavin lii griffin</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preload" as="image" href="/assets/bg1.webp"> <!-- 1-min is too grey -->
    <link rel="preload" as="image" href="/assets/bg2-min.webp">
    <link rel="preload" as="image" href="/assets/bg3-min.webp">
    <link rel="preload" as="image" href="/assets/bg4.webp">
    <link rel="preload" as="image" href="/assets/bg6-min.webp">
    <link rel="icon" href="/favicon.ico" sizes="any">
  </head>

   <body>
    <main class="desk-center">
      <!-- Main dialog window -->
      <section
        class="desk-panel"
        style="position: relative; width: 360px; max-width: 92vw;"
      >
        <div class="titlebar">
          <span class="title" id="window-title"></span>
          <button class="titlebtn" onclick="location.href='/home'" type="button">Êùé</button>
        </div>

        <div style="padding: 12px 16px 16px;">
          <a class="titlebtn enter-btn" href="/home">see more</a>
        </div>
      </section>
    </main>

    <script>
      function pickNonRepeating(key, options) {
        if (!Array.isArray(options) || options.length === 0) return null;
        if (options.length === 1) return options[0];

        const last = localStorage.getItem(key);
        let chosen = options[Math.floor(Math.random() * options.length)];

        for (let i = 0; i < 10 && chosen === last; i++) {
          chosen = options[Math.floor(Math.random() * options.length)];
        }

        if (chosen === last) {
          const idx = options.indexOf(last);
          chosen = options[(idx + 1) % options.length];
        }

        localStorage.setItem(key, chosen);
        return chosen;
      }

      // background (no consecutive repeats) + persist for home.html
      const backgrounds = ["/assets/bg1.webp", "/assets/bg2-min.webp", "/assets/bg3-min.webp", "/assets/bg4.webp", "/assets/bg6-min.webp"];
      const bg = pickNonRepeating("last_bg", backgrounds);
      if (bg) {
        document.body.style.backgroundImage = `url('${bg}')`;
        localStorage.setItem("current_bg", bg);
      }

      const titles = [
    "a fleeting greeting",                      
    "enquire further?",
    "you there?",            
  ];

  const titleEl = document.getElementById("window-title");
  const title = pickNonRepeating("last_title", titles);
  if (titleEl && title) titleEl.textContent = title;
  </script>
  </body>
  <script src="drag.js"></script>
  <script src="cursor_refresh.js"></script>

</html>
